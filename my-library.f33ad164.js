!function(){var e=document.querySelector(".theme-switch"),t=document.querySelector("body"),o=document.querySelector("footer");"dark"===localStorage.getItem("theme")&&(t.classList.add("dark-theme"),o.classList.add("dark-theme"),e.checked=!0),e.addEventListener("change",(function(){this.checked?(localStorage.setItem("theme","dark"),t.classList.add("dark-theme"),o.classList.add("dark-theme")):(localStorage.setItem("theme","light"),t.classList.remove("dark-theme"),o.classList.remove("dark-theme"))}));var n=function(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(e){console.log(e)}},r=function(e){try{var t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.log(e)}},c=document.querySelector(".backdrop"),i=document.querySelector(".movie-card__close-btn"),a=(document.querySelector(".movie-card"),document.querySelector("body"));function d(e){"Escape"===e.code&&l()}function s(e){e.target===c&&l(),console.log(e.target),e.stopPropagation()}function l(){c.classList.add("hidden"),window.removeEventListener("mousedown",d),window.removeEventListener("click",s),i.removeEventListener("click",s),a.classList.remove("hide-scroll")}var u=document.querySelector(".backdrop"),m=document.querySelector("body"),v=document.querySelector(".movie-card__close-btn"),h=document.querySelector(".movie-card__info__title"),p=document.querySelector(".movie-card__info__small-text"),_=document.querySelector(".movie-card__info__details-text"),f=document.querySelector(".original-title"),g=document.querySelector(".genres"),y=document.querySelector(".movie-card__img");function L(){document.querySelectorAll("[movie-id]").forEach((function(e){e.addEventListener("click",(function(e){v.addEventListener("click",l),u.classList.remove("hidden"),m.classList.add("hide-scroll");var t,o=e.currentTarget.getAttribute("movie-id");y.removeAttribute("src"),(t=o,fetch("".concat("https://api.themoviedb.org/3/","movie/").concat(t,"?api_key=").concat("481cbb6dba5121edc01136f73aa6b3c6")).then((function(e){if(!e.ok)throw new Error(e.status);return e.json()}))).then((function(e){!function(e){var t=e.id,o=e.title,c=e.overview,i=e.popularity,a=e.genres,d=e.poster_path,s=e.release_date;h.innerHTML=o,p.innerHTML=c,_.innerHTML=i,f.innerHTML=o;var l=a.map((function(e){return e.name})).join(", ");g.innerHTML=l,y.setAttribute("src","https://image.tmdb.org/t/p/w500"+d);var u={id:t,title:o,overview:c,popularity:i,genreNames:l,poster_path:d,release_date:s},m=document.querySelector(".movie-card__button-watched"),v=r("watched")||[],L=v.every((function(e){return e.id!==u.id}));m.innerHTML=L?"ADD TO WATCHED":"DELETE FROM WATCHED";var E=function(){if(L)return v.push(u),n("watched",v),void(m.innerHTML="DELETE FROM WATCHED");console.log("film is already added!")},S=function(){E(u)};m.addEventListener("click",S);var q=document.querySelector(".movie-card__button-queue"),k=r("queue")||[],w=k.every((function(e){return e.id!==u.id}));q.innerHTML=w?"ADD TO QUEUE":"DELETE FROM QUEUE";var b=function(){if(w)return k.push(u),n("queue",k),void(q.innerHTML="DELETE FROM QUEUE");console.log("film is already added!")},T=function(){b(u)};q.addEventListener("click",T)}(e)}))}))})),window.addEventListener("keydown",d),window.addEventListener("click",E)}function E(e){e.target===u&&l(),e.stopPropagation()}document.querySelector("#search-form");var S=document.querySelector(".favorite-film-list"),q=document.querySelector(".btn-watched"),k=document.querySelector(".btn-queue"),w=r("watched"),b=r("queue");function T(e){var t,o,n,r=e.map((function(e){var t,o=e.id,n=e.title,r=e.poster_path,c=e.genreNames,i=e.release_date;return t=r?"https://www.themoviedb.org/t/p/w600_and_h900_bestv2".concat(r):"https://st4.depositphotos.com/21486874/31104/i/600/depositphotos_311048494-stock-photo-coming-soon-neon-light-announcement.jpg",'<li class="movie-item" movie-id = "'.concat(o,'">\n  <img src="').concat(t,'" alt="movie poster" loading="lazy" class="movie-item__img"/>\n  <h2 class="movie-item__title">').concat(n,'</h2>\n  <p class="movie-item__text">\n    <span class="movie-item__genre">').concat(c,'</span> |\n    <span class="movie-item__year">').concat(i.slice(0,4),"</span>\n  </p>\n</li>")})).join("");S.innerHTML=r,t=document.createElement("div"),o=document.createElement("div"),(n=document.querySelector(".section")).prepend(t),t.prepend(o),o.innerHTML="\n      <div></div>\n      <div></div>\n    ",console.log(n),t.classList.add("backdrop-spinner"),o.classList.add("lds-ripple"),setTimeout((function(){t.remove()}),1e3),L()}q.addEventListener("click",(function(){return T(w)})),k.addEventListener("click",(function(){return T(b)})),T(w)}();
//# sourceMappingURL=my-library.f33ad164.js.map
