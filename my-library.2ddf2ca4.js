const e=document.querySelector(".theme-switch"),t=document.querySelector("body"),o=document.querySelector("footer");"dark"===localStorage.getItem("theme")&&(t.classList.add("dark-theme"),o.classList.add("dark-theme"),e.checked=!0),e.addEventListener("change",(function(){this.checked?(localStorage.setItem("theme","dark"),t.classList.add("dark-theme"),o.classList.add("dark-theme")):(localStorage.setItem("theme","light"),t.classList.remove("dark-theme"),o.classList.remove("dark-theme"))}));const n=document.querySelector(".btnTeam"),c=document.querySelector(".backdrop-footer"),r=document.querySelector("body"),i=document.querySelector(".modal__button");function d(){c.classList.add("is-hidden"),a()}function s(e){"Escape"!==e.key&&e.target!==c||(c.classList.add("is-hidden"),a())}function a(){document.removeEventListener("keydown",s),c.removeEventListener("click",s),i.removeEventListener("click",d),r.classList.remove("noScroll")}n.addEventListener("click",(function(){return c.classList.remove("is-hidden"),void document.querySelector("body").classList.add("noScroll")})),document.addEventListener("keydown",s),c.addEventListener("click",s),c.addEventListener("click",d);const l=(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t))}catch(e){console.log(e)}},m=e=>{try{const t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.log(e)}},u=document.querySelector(".backdrop"),v=document.querySelector(".movie-card__close-btn"),h=(document.querySelector(".movie-card"),document.querySelector("body"));function p(e){"Escape"===e.code&&y()}function L(e){e.target===u&&y(),console.log(e.target),e.stopPropagation()}function y(){u.classList.add("hidden"),window.removeEventListener("mousedown",p),window.removeEventListener("click",L),v.removeEventListener("click",L),h.classList.remove("hide-scroll")}const E=document.querySelector(".backdrop"),_=document.querySelector("body"),g=document.querySelector(".movie-card__close-btn"),S=document.querySelector(".movie-card__info__title"),k=document.querySelector(".movie-card__info__small-text"),q=document.querySelector(".movie-card__info__details-text"),f=document.querySelector(".original-title"),b=document.querySelector(".genres"),w=document.querySelector(".movie-card__img");function T(){document.querySelectorAll("[movie-id]").forEach((e=>{e.addEventListener("click",(e=>{g.addEventListener("click",y),E.classList.remove("hidden"),_.classList.add("hide-scroll");const t=e.currentTarget.getAttribute("movie-id");var o;w.removeAttribute("src"),(o=t,fetch(`https://api.themoviedb.org/3/movie/${o}?api_key=481cbb6dba5121edc01136f73aa6b3c6`).then((e=>{if(!e.ok)throw new Error(e.status);return e.json()}))).then((e=>{!function({id:e,title:t,overview:o,popularity:n,genres:c,poster_path:r,release_date:i}){S.innerHTML=t,k.innerHTML=o,q.innerHTML=n,f.innerHTML=t;const d=c.map((e=>e.name)).join(", ");b.innerHTML=d,w.setAttribute("src","https://image.tmdb.org/t/p/w500"+r);const s={id:e,title:t,overview:o,popularity:n,genreNames:d,poster_path:r,release_date:i},a=document.querySelector(".movie-card__button-watched"),u=m("watched")||[],v=u.every((e=>e.id!==s.id));a.innerHTML=v?"ADD TO WATCHED":"DELETE FROM WATCHED";const h=()=>{if(v)return u.push(s),l("watched",u),void(a.innerHTML="DELETE FROM WATCHED");console.log("film is already added!")},p=()=>{h(s)};a.addEventListener("click",p);const L=document.querySelector(".movie-card__button-queue"),y=m("queue")||[],E=y.every((e=>e.id!==s.id));L.innerHTML=E?"ADD TO QUEUE":"DELETE FROM QUEUE";const _=()=>{if(E)return y.push(s),l("queue",y),void(L.innerHTML="DELETE FROM QUEUE");console.log("film is already added!")},g=()=>{_(s)};L.addEventListener("click",g)}(e)}))}))})),window.addEventListener("keydown",p),window.addEventListener("click",M)}function M(e){e.target===E&&y(),e.stopPropagation()}function H(){const e=document.createElement("div"),t=document.createElement("div"),o=document.querySelector(".section");o.prepend(e),e.prepend(t),t.innerHTML="\n      <div></div>\n      <div></div>\n    ",console.log(o),e.classList.add("backdrop-spinner"),t.classList.add("lds-ripple"),setTimeout((()=>{e.remove()}),1e3)}document.querySelector("#search-form");const D=document.querySelector(".favorite-film-list"),A=document.querySelector(".btn-watched"),O=document.querySelector(".btn-queue"),$=m("watched"),U=m("queue");function I(e){const t=e.map((({id:e,title:t,poster_path:o,genreNames:n,release_date:c})=>{let r;return r=o?`https://www.themoviedb.org/t/p/w600_and_h900_bestv2${o}`:"https://st4.depositphotos.com/21486874/31104/i/600/depositphotos_311048494-stock-photo-coming-soon-neon-light-announcement.jpg",`<li class="movie-item" movie-id = "${e}">\n  <img src="${r}" alt="movie poster" loading="lazy" class="movie-item__img"/>\n  <h2 class="movie-item__title">${t}</h2>\n  <p class="movie-item__text">\n    <span class="movie-item__genre">${n}</span> |\n    <span class="movie-item__year">${c.slice(0,4)}</span>\n  </p>\n</li>`})).join("");D.innerHTML=t,H(),T()}A.addEventListener("click",(()=>I($))),O.addEventListener("click",(()=>I(U))),I($);
//# sourceMappingURL=my-library.2ddf2ca4.js.map
