const e=document.querySelector(".theme-switch"),t=document.querySelector("body"),o=document.querySelector("footer");"dark"===localStorage.getItem("theme")&&(t.classList.add("dark-theme"),o.classList.add("dark-theme"),e.checked=!0),e.addEventListener("change",(function(){this.checked?(localStorage.setItem("theme","dark"),t.classList.add("dark-theme"),o.classList.add("dark-theme")):(localStorage.setItem("theme","light"),t.classList.remove("dark-theme"),o.classList.remove("dark-theme"))}));const r=(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t))}catch(e){console.log(e)}},n=e=>{try{const t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.log(e)}},c=document.querySelector(".backdrop"),i=document.querySelector(".movie-card__close-btn"),d=(document.querySelector(".movie-card"),document.querySelector("body"));function s(e){"Escape"===e.code&&l()}function a(e){e.target===c&&l(),console.log(e.target),e.stopPropagation()}function l(){c.classList.add("hidden"),window.removeEventListener("mousedown",s),window.removeEventListener("click",a),i.removeEventListener("click",a),d.classList.remove("hide-scroll")}const m=document.querySelector(".backdrop"),u=document.querySelector("body"),v=document.querySelector(".movie-card__close-btn"),h=document.querySelector(".movie-card__info__title"),p=document.querySelector(".movie-card__info__small-text"),_=document.querySelector(".movie-card__info__details-text"),g=document.querySelector(".original-title"),y=document.querySelector(".genres"),E=document.querySelector(".movie-card__img");function L(){document.querySelectorAll("[movie-id]").forEach((e=>{e.addEventListener("click",(e=>{v.addEventListener("click",l),m.classList.remove("hidden"),u.classList.add("hide-scroll");const t=e.currentTarget.getAttribute("movie-id");var o;E.removeAttribute("src"),(o=t,fetch(`https://api.themoviedb.org/3/movie/${o}?api_key=481cbb6dba5121edc01136f73aa6b3c6`).then((e=>{if(!e.ok)throw new Error(e.status);return e.json()}))).then((e=>{!function({id:e,title:t,overview:o,popularity:c,genres:i,poster_path:d,release_date:s}){h.innerHTML=t,p.innerHTML=o,_.innerHTML=c,g.innerHTML=t;const a=i.map((e=>e.name)).join(", ");y.innerHTML=a,E.setAttribute("src","https://image.tmdb.org/t/p/w500"+d);const l={id:e,title:t,overview:o,popularity:c,genreNames:a,poster_path:d,release_date:s},m=document.querySelector(".movie-card__button-watched"),u=n("watched")||[],v=u.every((e=>e.id!==l.id));m.innerHTML=v?"ADD TO WATCHED":"DELETE FROM WATCHED";const L=()=>{if(v)return u.push(l),r("watched",u),void(m.innerHTML="DELETE FROM WATCHED");console.log("film is already added!")},S=()=>{L(l)};m.addEventListener("click",S);const q=document.querySelector(".movie-card__button-queue"),k=n("queue")||[],w=k.every((e=>e.id!==l.id));q.innerHTML=w?"ADD TO QUEUE":"DELETE FROM QUEUE";const f=()=>{if(w)return k.push(l),r("queue",k),void(q.innerHTML="DELETE FROM QUEUE");console.log("film is already added!")},b=()=>{f(l)};q.addEventListener("click",b)}(e)}))}))})),window.addEventListener("keydown",s),window.addEventListener("click",S)}function S(e){e.target===m&&l(),e.stopPropagation()}document.querySelector("#search-form");const q=document.querySelector(".favorite-film-list"),k=document.querySelector(".btn-watched"),w=document.querySelector(".btn-queue"),f=n("watched"),b=n("queue");function T(e){const t=e.map((({id:e,title:t,poster_path:o,genreNames:r,release_date:n})=>{let c;return c=o?`https://www.themoviedb.org/t/p/w600_and_h900_bestv2${o}`:"https://st4.depositphotos.com/21486874/31104/i/600/depositphotos_311048494-stock-photo-coming-soon-neon-light-announcement.jpg",`<li class="movie-item" movie-id = "${e}">\n  <img src="${c}" alt="movie poster" loading="lazy" class="movie-item__img"/>\n  <h2 class="movie-item__title">${t}</h2>\n  <p class="movie-item__text">\n    <span class="movie-item__genre">${r}</span> |\n    <span class="movie-item__year">${n.slice(0,4)}</span>\n  </p>\n</li>`})).join("");q.innerHTML=t,L()}k.addEventListener("click",(()=>T(f))),w.addEventListener("click",(()=>T(b))),T(f);
//# sourceMappingURL=my-library.8f5a77c6.js.map
