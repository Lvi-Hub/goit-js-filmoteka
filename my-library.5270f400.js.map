{"mappings":"qhBAAAA,EAAA,S,WCAA,IAAAC,EAAAD,EAAA,S,uCAOA,MAAME,EAA2BC,SAASC,cACxC,yBAEIC,EAA6BF,SAASC,cAC1C,2BAWIE,EAAqBH,SAASC,cAAc,uBAC5CG,EAAaJ,SAASC,cAAc,gBACpCI,EAAaL,SAASC,cAAc,cAEpCK,GAAgB,EAAAR,EAAAS,qBAAoB,YAAc,GAClDC,GAAgB,EAAAV,EAAAS,qBAAoB,UAAY,GAgBhDE,EAAa,GACbC,EAAe,GAGrB,MAAMC,EAAe,CACnBC,YAAaJ,GAAiB,IAAIK,OAClCC,KAJe,EAKfC,aAAc,GACdC,aAAa,EAEbC,aAAc,GAGVC,EAAiB,CACrBN,YAAaN,GAAiB,IAAIO,OAClCC,KAbe,EAcfC,aAAc,GACdC,aAAa,EAEbC,aAAc,GAGhB,MAAQT,GAAiB,IAAIK,OAAS,GACpCJ,EAAWU,KAAKX,EAAcY,MAAM,EAxBpB,KAyBhBZ,EAAca,OAAO,EAzBL,IA4BlB,MAAQf,GAAiB,IAAIO,OAAS,GACpCH,EAAaS,KAAKb,EAAcc,MAAM,EA7BtB,KA8BhBd,EAAce,OAAO,EA9BL,IAiClB,MAAMC,EAAkB,IAAIC,EAAAC,GAAJ,CAAezB,EAA0BY,GAC3Dc,EAAoB,IAAIF,EAAAC,GAAJ,CACxBtB,EACAgB,GAuDF,SAASQ,EAAyBC,GAChC,IACE,MAAMC,EAAcD,EACjBE,KAAI,EAACC,GAAEA,EAAEC,MAAEA,EAAKC,YAAEA,EAAWC,WAAEA,EAAUC,aAAEA,MAC1C,IAAIC,EAMJ,OAJEA,EADEH,EACW,sDAAsDA,IAEtD,iIAER,oCAAoCF,oBACrCK,mGACoBJ,+EAEIE,kDACDC,EAAad,MAAM,EAAG,0BAErD,IAECgB,KAAK,IACRjC,EAAmBkC,UAAYT,GAC/B,EAAAU,EAAAC,gBACA,EAAAC,EAAAC,8B,CACA,MAAOC,GACPC,QAAQC,IAAI,wB,EA3EhBxC,EAAWyC,iBAAiB,SAAS,KACnC9C,EAAyB+C,UAAUC,IAAI,aACvCzB,EAAgB0B,MAChBtB,GAAyB,EAAA5B,EAAAS,qBAAoB,cAGxC,EAAAT,EAAAS,qBAAoB,YAAc,IAAIM,OAAS,GAClDX,EAA2B4C,UAAUC,IAAI,cAEzC7C,EAA2B4C,UAAUG,OAAO,aAE5CxB,EAAkByB,GAAG,cAAcC,IACjCzB,EAAyBhB,EAAayC,EAAMrC,KAAO,IACnDsC,OAAOC,SAAS,CAAEC,IAAK,EAAGC,SAAU,UAAW,I,IAKrDlD,EAAWwC,iBAAiB,SAAS,KACnCnB,EAAyBjB,EAAW,IACpCP,EAA2B4C,UAAUC,IAAI,aACzCtB,EAAkBuB,MAClBtB,GAAyB,EAAA5B,EAAAS,qBAAoB,YAExC,EAAAT,EAAAS,qBAAoB,UAAY,IAAIM,OAAS,GAChDd,EAAyB+C,UAAUC,IAAI,cAEvChD,EAAyB+C,UAAUG,OAAO,aAE1C3B,EAAgB4B,GAAG,cAAcC,IAC/BzB,EAAyBjB,EAAW0C,EAAMrC,KAAO,IACjDsC,OAAOC,SAAS,CAAEC,IAAK,EAAGC,SAAU,UAAW,I,IAKrD7B,EAAyBhB,EAAa,IACtCX,EAAyB+C,UAAUC,IAAI,aACvCzB,EAAgB0B,QAEX,EAAAlD,EAAAS,qBAAoB,YAAc,IAAIM,OAAS,GAClDX,EAA2B4C,UAAUC,IAAI,cAEzC7C,EAA2B4C,UAAUG,OAAO,aAE5CxB,EAAkByB,GAAG,cAAcC,IACjCzB,EAAyBhB,EAAayC,EAAMrC,KAAO,IACnDsC,OAAOC,SAAS,CAAEC,IAAK,EAAGC,SAAU,UAAW","sources":["src/library.js","src/js/watched.js"],"sourcesContent":["import './js/theme';\n\n\nimport './js/modal-team';\n\nimport './js/watched';\n","import {\n  setToLocalStorage,\n  getFromLocalStorage,\n} from './local-storage-functions';\n\nimport Pagination from 'tui-pagination';\n// import { paginationContainer } from \"./pagination\";\nconst queuePaginationContainer = document.querySelector(\n  '[js-queue-pagination]'\n);\nconst watchedPaginationContainer = document.querySelector(\n  '[js-watched-pagination]'\n);\n\nimport { addEventlListenertoFilmCard } from './modal-about';\n\nimport { showSpinner } from './show_spinner';\n\n// import {\n//   onSearchFormSubmit\n// } from './searchFilm';\n\nconst filmsListLibraryEl = document.querySelector('.favorite-film-list');\nconst watchBtnEl = document.querySelector('.btn-watched');\nconst queueBtnEl = document.querySelector('.btn-queue');\n\nconst moviesToWatch = getFromLocalStorage('watched') || [];\nconst moviesInQueue = getFromLocalStorage('queue') || [];\n\n//const moviesToWatch = getFromLocalStorage('watched');\n//const moviesInQueue = getFromLocalStorage('queue');\n\n// console.log(moviesToWatch);\n\n// if (moviesToWatch === undefined) {\n//   moviesToWatch = [];\n// }\n\n// if (moviesInQueue === undefined) {\n//   moviesInQueue = [];\n// }\n\nconst chunkSize = 20;\nconst queueArray = [];\nconst watchedArray = [];\nlet pageNumber = 1;\n\nconst queueOptions = {\n  totalItems: (moviesInQueue || []).length,\n  page: pageNumber,\n  itemsPerPage: 20,\n  centerAlign: true,\n\n  visiblePages: 5,\n};\n\nconst toWatchOptions = {\n  totalItems: (moviesToWatch || []).length,\n  page: pageNumber,\n  itemsPerPage: 20,\n  centerAlign: true,\n\n  visiblePages: 5,\n};\n\nwhile ((moviesInQueue || []).length > 0) {\n  queueArray.push(moviesInQueue.slice(0, chunkSize));\n  moviesInQueue.splice(0, chunkSize);\n}\n\nwhile ((moviesToWatch || []).length > 0) {\n  watchedArray.push(moviesToWatch.slice(0, chunkSize));\n  moviesToWatch.splice(0, chunkSize);\n}\n\nconst queuePagination = new Pagination(queuePaginationContainer, queueOptions);\nconst toWatchPagination = new Pagination(\n  watchedPaginationContainer,\n  toWatchOptions\n);\n\n// searchFormEl.addEventListener('submit', onSearchFormSubmit);\nwatchBtnEl.addEventListener('click', () => {\n  queuePaginationContainer.classList.add('is-hidden');\n  queuePagination.off();\n  createandShowFilmsMarkup(getFromLocalStorage('watched'));\n  // console.log(getFromLocalStorage('watched').length);\n\n  if ((getFromLocalStorage('watched') || []).length < 21) {\n    watchedPaginationContainer.classList.add('is-hidden');\n  } else {\n    watchedPaginationContainer.classList.remove('is-hidden');\n\n    toWatchPagination.on('beforeMove', event => {\n      createandShowFilmsMarkup(watchedArray[event.page - 1]);\n      window.scrollTo({ top: 0, behavior: 'smooth' });\n    });\n  }\n});\n\nqueueBtnEl.addEventListener('click', () => {\n  createandShowFilmsMarkup(queueArray[0]);\n  watchedPaginationContainer.classList.add('is-hidden');\n  toWatchPagination.off();\n  createandShowFilmsMarkup(getFromLocalStorage('queue'));\n\n  if ((getFromLocalStorage('queue') || []).length < 21) {\n    queuePaginationContainer.classList.add('is-hidden');\n  } else {\n    queuePaginationContainer.classList.remove('is-hidden');\n\n    queuePagination.on('beforeMove', event => {\n      createandShowFilmsMarkup(queueArray[event.page - 1]);\n      window.scrollTo({ top: 0, behavior: 'smooth' });\n    });\n  }\n});\n\ncreateandShowFilmsMarkup(watchedArray[0]);\nqueuePaginationContainer.classList.add('is-hidden');\nqueuePagination.off();\n\nif ((getFromLocalStorage('watched') || []).length < 21) {\n  watchedPaginationContainer.classList.add('is-hidden');\n} else {\n  watchedPaginationContainer.classList.remove('is-hidden');\n\n  toWatchPagination.on('beforeMove', event => {\n    createandShowFilmsMarkup(watchedArray[event.page - 1]);\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  });\n}\n\nfunction createandShowFilmsMarkup(searchFilms) {\n  try {\n    const filmsMarkup = searchFilms\n      .map(({ id, title, poster_path, genreNames, release_date }) => {\n        let posterPath;\n        if (poster_path) {\n          posterPath = `https://www.themoviedb.org/t/p/w600_and_h900_bestv2${poster_path}`;\n        } else {\n          posterPath = `https://st4.depositphotos.com/21486874/31104/i/600/depositphotos_311048494-stock-photo-coming-soon-neon-light-announcement.jpg`;\n        }\n        return `<li class=\"movie-item\" movie-id=\"${id}\">\n  <img src=\"${posterPath}\" alt=\"movie poster\" loading=\"lazy\" class=\"movie-item__img\"/>\n  <h2 class=\"movie-item__title\">${title}</h2>\n  <p class=\"movie-item__text\">\n    <span class=\"movie-item__genre\">${genreNames}</span> |\n    <span class=\"movie-item__year\">${release_date.slice(0, 4)}</span>\n  </p>\n</li>`;\n      })\n      .join('');\n    filmsListLibraryEl.innerHTML = filmsMarkup;\n    showSpinner();\n    addEventlListenertoFilmCard();\n  } catch (error) {\n    console.log('LocalStorage is empty');\n  }\n}\n"],"names":["parcelRequire","$bAF63","$7126a8cfa5cf9b17$var$queuePaginationContainer","document","querySelector","$7126a8cfa5cf9b17$var$watchedPaginationContainer","$7126a8cfa5cf9b17$var$filmsListLibraryEl","$7126a8cfa5cf9b17$var$watchBtnEl","$7126a8cfa5cf9b17$var$queueBtnEl","$7126a8cfa5cf9b17$var$moviesToWatch","getFromLocalStorage","$7126a8cfa5cf9b17$var$moviesInQueue","$7126a8cfa5cf9b17$var$queueArray","$7126a8cfa5cf9b17$var$watchedArray","$7126a8cfa5cf9b17$var$queueOptions","totalItems","length","page","itemsPerPage","centerAlign","visiblePages","$7126a8cfa5cf9b17$var$toWatchOptions","push","slice","splice","$7126a8cfa5cf9b17$var$queuePagination","$parcel$interopDefault","$fb9GJ","$7126a8cfa5cf9b17$var$toWatchPagination","$7126a8cfa5cf9b17$var$createandShowFilmsMarkup","searchFilms","filmsMarkup","map","id","title","poster_path","genreNames","release_date","posterPath","join","innerHTML","$lj9Ab","showSpinner","$ghSiQ","addEventlListenertoFilmCard","error","console","log","addEventListener","classList","add","off","remove","on","event","window","scrollTo","top","behavior"],"version":3,"file":"my-library.5270f400.js.map"}