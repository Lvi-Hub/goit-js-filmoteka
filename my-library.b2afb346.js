const e=document.querySelector(".theme-switch"),t=document.querySelector("body"),o=document.querySelector("footer");"dark"===localStorage.getItem("theme")&&(t.classList.add("dark-theme"),o.classList.add("dark-theme"),e.checked=!0),e.addEventListener("change",(function(){e.checked?(localStorage.setItem("theme","dark"),t.classList.add("dark-theme"),o.classList.add("dark-theme")):(localStorage.setItem("theme","light"),t.classList.remove("dark-theme"),o.classList.remove("dark-theme"))}));const r=(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t))}catch(e){console.log(e)}},n=e=>{try{const t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.log(e)}},c=document.querySelector(".backdrop"),i=document.querySelector(".movie-card__close-btn"),a=(document.querySelector(".movie-card"),document.querySelector("body"));function d(e){"Escape"===e.code&&l()}function s(e){e.target===c&&l(),console.log(e.target),e.stopPropagation()}function l(){c.classList.add("hidden"),window.removeEventListener("mousedown",d),window.removeEventListener("click",s),i.removeEventListener("click",s),a.classList.remove("hide-scroll")}const m=document.querySelector(".backdrop"),u=document.querySelector("body"),v=document.querySelector(".movie-card__close-btn"),h=(document.querySelector(".movie-card"),document.querySelector(".movie-card__info__title"),document.querySelector(".movie-card__info__small-text")),g=(document.querySelector(".movie-card__info__details-text"),document.querySelector(".original-title")),_=(document.querySelector(".genres"),document.querySelector(".movie-card__img"));function y(){document.querySelectorAll("[movie-id]").forEach((e=>{e.addEventListener("click",(e=>{v.addEventListener("click",l),m.classList.remove("hidden"),u.classList.add("hide-scroll");const t=e.currentTarget.getAttribute("movie-id");var o;_.removeAttribute("src"),(o=t,fetch(`https://api.themoviedb.org/3/movie/${o}?api_key=481cbb6dba5121edc01136f73aa6b3c6`).then((e=>{if(!e.ok)throw new Error(e.status);return e.json()}))).then((e=>{!function({id:e,title:t,overview:o,popularity:c,genres:i,poster_path:a,release_date:d}){t.innerHTML=t,h.innerHTML=o,c.innerHTML=c,g.innerHTML=t,genreNames=i.map((e=>e.name)).join(", "),i.innerHTML=genreNames,_.setAttribute("src","https://image.tmdb.org/t/p/w500"+a);const s={id:e,title:t,overview:o,popularity:c,genreNames:genreNames,poster_path:a,release_date:d},l=document.querySelector(".movie-card__button-watched"),m=n("watched")||[],u=m.every((e=>e.id!==s.id));l.innerHTML=u?"ADD TO WATCHED":"DELETE FROM WATCHED";const v=()=>{if(u)return m.push(s),r("watched",m),void(l.innerHTML="DELETE FROM WATCHED");console.log("film is already added!")},y=()=>{v(s)};l.addEventListener("click",y);const p=document.querySelector(".movie-card__button-queue"),E=n("queue")||[],L=E.every((e=>e.id!==s.id));p.innerHTML=L?"ADD TO QUEUE":"DELETE FROM QUEUE";const S=()=>{if(L)return E.push(s),r("queue",E),void(p.innerHTML="DELETE FROM QUEUE");console.log("film is already added!")},q=()=>{S(s)};p.addEventListener("click",q)}(e)}))}))})),window.addEventListener("keydown",d),window.addEventListener("click",p)}function p(e){e.target===m&&l(),e.stopPropagation()}const E=document.querySelector(".btn-watched"),L=document.querySelector(".film-list");console.log(L),E.addEventListener("click",(function(){const e=n("watched");console.log(e);const t=(o=e,o.map((({release_date:e,title:t,genreNames:o,poster_path:r,id:n})=>`<li class="movie-item"  movie-id="${n}">\n        <img src="https://www.themoviedb.org/t/p/w600_and_h900_bestv2${r}" \n          alt="movie poster" loading="lazy" class="movie-item__img" />\n        <h2 class="movie-item__title">${t}</h2>\n        <p class="movie-item__text">\n          <span class="movie-item__genre">${o}</span> |\n          <span class="movie-item__year">${e.slice(0,4)}</span>\n        </p>\n      </li>`)).join(""));var o;L.insertAdjacentHTML("afterbegin",t),y()}));
//# sourceMappingURL=my-library.b2afb346.js.map
