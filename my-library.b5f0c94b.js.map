{"mappings":"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","sources":["src/js/theme.js","src/js/local-storage-functions.js","src/js/closeModal.js","src/js/modal-about.js","src/js/watched.js"],"sourcesContent":["const themeSwitch = document.querySelector('.theme-switch');\nconst body = document.querySelector('body');\nconst footer = document.querySelector('footer');\n\nif (localStorage.getItem('theme') === 'dark') {\n  body.classList.add('dark-theme');\n  footer.classList.add('dark-theme');\n  themeSwitch.checked = true;\n}\n\nthemeSwitch.addEventListener('change', function () {\n  if (themeSwitch.checked) {\n    localStorage.setItem('theme', 'dark');\n    body.classList.add('dark-theme');\n    footer.classList.add('dark-theme');\n  } else {\n    localStorage.setItem('theme', 'light');\n    body.classList.remove('dark-theme');\n    footer.classList.remove('dark-theme');\n  }\n});\n","const setToLocalStorage = (key, value) => {\n  try {\n    localStorage.setItem(key, JSON.stringify(value));\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nconst getFromLocalStorage = key => {\n  try {\n    const savedFilms = localStorage.getItem(key);\n    return savedFilms === null ? undefined : JSON.parse(savedFilms);\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nexport { setToLocalStorage, getFromLocalStorage };\n","//May change, if the name in HTML will be different\n\n// import { hideModalOnEscape, hideModalOnCLick } from \"./modalClose.js\";\n// window.addEventListener(\"keydown\", hideModalOnEscape);\n// window.addEventListener(\"click\", hideModalOnCLick);\n// closeBtnEl.addEventListener(\"click\", hideModal);\n\nconst card = document.querySelector(\".backdrop\");\nconst closeBtnEl = document.querySelector(\".movie-card__close-btn\");\nconst modalEl = document.querySelector(\".movie-card\");\nconst body = document.querySelector('body');\n\n\n//Hides modal if Escape button is pressed\nexport function hideModalOnEscape(e) {\n    e.code === \"Escape\" &&  hideModal();\n}\n\n//Hides modal if clicked outside of the modal\nexport function hideModalOnCLick(e) {\n    e.target === card && hideModal();\n    console.log(e.target)\n    e.stopPropagation();\n  }\n\n//HidesModal\nexport function hideModal() {\n    hideBackdrop();\n    removeEventListeners();\n    body.classList.remove('hide-scroll');\n  }\n\n//Hides backdrop\nfunction hideBackdrop() {\n    card.classList.add(\"hidden\");\n}\n\n//Removes all event listeners\n function removeEventListeners() {\n    window.removeEventListener(\"mousedown\", hideModalOnEscape);\n    window.removeEventListener(\"click\", hideModalOnCLick);\n    closeBtnEl.removeEventListener(\"click\", hideModalOnCLick);\n}\n","import {\n  setToLocalStorage,\n  getFromLocalStorage,\n} from './local-storage-functions';\nimport { hideModalOnEscape, hideModal } from './closeModal';\n\nconst card = document.querySelector('.backdrop');\nconst body = document.querySelector('body');\nconst BASE_URL = 'https://api.themoviedb.org/3/';\nconst API_KEY = '481cbb6dba5121edc01136f73aa6b3c6';\n\nconst closeBtnEl = document.querySelector('.movie-card__close-btn');\nconst modalEl = document.querySelector('.movie-card');\nconst title = document.querySelector('.movie-card__info__title');\nconst text = document.querySelector('.movie-card__info__small-text');\nconst popularity = document.querySelector('.movie-card__info__details-text');\nconst originalTitle = document.querySelector('.original-title');\nconst genres = document.querySelector('.genres');\nconst poster = document.querySelector('.movie-card__img');\n\nfunction fetchFilms(id) {\n  return fetch(`${BASE_URL}movie/${id}?api_key=${API_KEY}`).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n    return response.json();\n  });\n}\n\nexport function addEventlListenertoFilmCard() {\n  const filmCardElements = document.querySelectorAll('[movie-id]');\n  filmCardElements.forEach(element => {\n    element.addEventListener('click', event => {\n      closeBtnEl.addEventListener('click', hideModal);\n      card.classList.remove('hidden');\n      body.classList.add('hide-scroll');\n      const idFilm = event.currentTarget.getAttribute('movie-id');\n      poster.removeAttribute('src');\n      fetchFilms(idFilm).then(data => {\n        fillModal(data);\n      });\n    });\n  });\n  window.addEventListener('keydown', hideModalOnEscape);\n  window.addEventListener('click', hideModalOnBackdropClick);\n}\n\nfunction fillModal({\n  id,\n  title,\n  overview,\n  popularity,\n  genres,\n  poster_path,\n  release_date,\n}) {\n  title.innerHTML = title;\n  text.innerHTML = overview;\n  popularity.innerHTML = popularity;\n  originalTitle.innerHTML = title;\n  genreNames = genres.map(genre => genre.name).join(', ');\n  genres.innerHTML = genreNames;\n  poster.setAttribute('src', 'https://image.tmdb.org/t/p/w500' + poster_path);\n\n  const filmDetails = {\n    id,\n    title,\n    overview,\n    popularity,\n    genreNames,\n    poster_path,\n    release_date,\n  };\n\n  const addToWatched = document.querySelector('.movie-card__button-watched');\n  const watchedFilms = getFromLocalStorage('watched') || [];\n  const isFilmNoWatched = watchedFilms.every(el => el.id !== filmDetails.id);\n  if (!isFilmNoWatched) {\n    addToWatched.innerHTML = 'DELETE FROM WATCHED';\n  } else {\n    addToWatched.innerHTML = 'ADD TO WATCHED';\n  }\n  const addToWatchedFilms = () => {\n    if (isFilmNoWatched) {\n      watchedFilms.push(filmDetails);\n      setToLocalStorage('watched', watchedFilms);\n      addToWatched.innerHTML = 'DELETE FROM WATCHED';\n      return;\n    } else {\n      console.log('film is already added!');\n    }\n  };\n  const handleAddToWatchedFilms = () => {\n    addToWatchedFilms(filmDetails);\n  };\n  addToWatched.addEventListener('click', handleAddToWatchedFilms);\n\n  const addToQueue = document.querySelector('.movie-card__button-queue');\n  const queueFilms = getFromLocalStorage('queue') || [];\n  const isFilmNoQueue = queueFilms.every(el => el.id !== filmDetails.id);\n  if (!isFilmNoQueue) {\n    addToQueue.innerHTML = 'DELETE FROM QUEUE';\n  } else {\n    addToQueue.innerHTML = 'ADD TO QUEUE';\n  }\n  const addToQueueFilms = () => {\n    if (isFilmNoQueue) {\n      queueFilms.push(filmDetails);\n      setToLocalStorage('queue', queueFilms);\n      addToQueue.innerHTML = 'DELETE FROM QUEUE';\n      return;\n    } else {\n      console.log('film is already added!');\n    }\n  };\n  const handleAddToQueueFilms = () => {\n    addToQueueFilms(filmDetails);\n  };\n  addToQueue.addEventListener('click', handleAddToQueueFilms);\n}\n\nfunction hideModalOnBackdropClick(e) {\n  e.target === card && hideModal();\n  // console.log(e.target);\n  e.stopPropagation();\n}","import {\n  setToLocalStorage,\n  getFromLocalStorage,\n} from './local-storage-functions';\n// import { makeMarkupPopularMov } from './homepage_main'\nimport { addEventlListenertoFilmCard } from './modal-about';\n\n\n\nconst watchedBtn = document.querySelector('.btn-watched');\nconst watchedList = document.querySelector('.film-list');\nconsole.log(watchedList);\n\nwatchedBtn.addEventListener('click', handlerWatchedMovieBtn);\n\n\nfunction handlerWatchedMovieBtn() {\n\n    const watchedMovieList = getFromLocalStorage('watched');\n    console.log(watchedMovieList);\n\n    const markUp = makeMarkupPopularMov(watchedMovieList);\n    watchedList.insertAdjacentHTML('afterbegin', markUp);\n    addEventlListenertoFilmCard();\n\n\n}\n\nfunction makeMarkupPopularMov(movieData) {\n    return movieData.map(({release_date, title, genreNames, poster_path, id}) => {\n\n    //   const genresArr = genre_ids.map((id) => getGenreName(id));\n    //   const genreResult = checkArrlength(genresArr).join(', ');\n    //   if (release_date === undefined) {\n    //       release_date = '';\n    //    }\n      return `<li class=\"movie-item\"  movie-id=\"${id}\">\n        <img src=\"https://www.themoviedb.org/t/p/w600_and_h900_bestv2${poster_path}\" \n          alt=\"movie poster\" loading=\"lazy\" class=\"movie-item__img\" />\n        <h2 class=\"movie-item__title\">${title}</h2>\n        <p class=\"movie-item__text\">\n          <span class=\"movie-item__genre\">${genreNames}</span> |\n          <span class=\"movie-item__year\">${release_date.slice(0, 4)}</span>\n        </p>\n      </li>`;\n    })\n    .join('');\n}\n\n"],"names":["$73a6fccb2ce51eb8$var$themeSwitch","document","querySelector","$73a6fccb2ce51eb8$var$body","$73a6fccb2ce51eb8$var$footer","localStorage","getItem","classList","add","checked","addEventListener","setItem","remove","$fc60fe24d5d406b5$export$150f044b3c48a8f0","key","value","JSON","stringify","err","console","log","$fc60fe24d5d406b5$export$602bc7b349337fec","savedFilms","undefined","parse","$36e3eba7cc6e7a89$var$card","$36e3eba7cc6e7a89$var$closeBtnEl","$36e3eba7cc6e7a89$var$body","$36e3eba7cc6e7a89$export$8caa602f3296db11","e","code","$36e3eba7cc6e7a89$export$af4939467128bcd0","$36e3eba7cc6e7a89$export$c47d02bd2e597fac","target","stopPropagation","window","removeEventListener","$be5742975d1f5e6f$var$card","$be5742975d1f5e6f$var$body","$be5742975d1f5e6f$var$closeBtnEl","$be5742975d1f5e6f$var$text","$be5742975d1f5e6f$var$originalTitle","$be5742975d1f5e6f$var$poster","$be5742975d1f5e6f$export$9c664ce0a735a0dd","querySelectorAll","forEach","element","event","id","idFilm","currentTarget","getAttribute","removeAttribute","fetch","concat","then","response","ok","Error","status","json","data","param","title1","title","overview","popularity1","popularity","genres1","genres","poster_path","release_date","innerHTML","genreNames","map","genre","name","join","setAttribute","filmDetails","addToWatched","watchedFilms","isFilmNoWatched","every","el","addToWatchedFilms","push","handleAddToWatchedFilms","addToQueue","queueFilms","isFilmNoQueue","addToQueueFilms","handleAddToQueueFilms","$be5742975d1f5e6f$var$fillModal","$be5742975d1f5e6f$var$hideModalOnBackdropClick","$a215baf1061f969f$var$watchedBtn","$a215baf1061f969f$var$watchedList","watchedMovieList","markUp","movieData","slice","insertAdjacentHTML"],"version":3,"file":"my-library.b5f0c94b.js.map"}